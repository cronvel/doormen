(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.doormen=e()}})(function(){var e,t,r;return function n(e,t,r){function i(o,s){if(!t[o]){if(!e[o]){var f=typeof require=="function"&&require;if(!s&&f)return f(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=t[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return i(r?r:t)},u,u.exports,n,e,t,r)}return t[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,r){t.exports=e("./doormen.js");t.exports.isBrowser=true},{"./doormen.js":2}],2:[function(e,t,r){function n(){var e,t,r;if(arguments.length<2||arguments.length>3){throw new Error("doormen() needs at least 2 and at most 3 arguments")}if(arguments.length===2){t=arguments[0];e=arguments[1]}else{r=arguments[0];t=arguments[1];e=arguments[2]}if(typeof t==="string"){t=n.sentence(t)}if(!t||typeof t!=="object"){throw new TypeError("Bad schema, it should be an object or an array of object!")}if(!r||typeof r!=="object"){r={}}var o={validate:true,errors:[],check:i,validatorError:a,report:!!r.report,"export":!!r.export};var s=o.check(t,e,{path:e===null?"null":Array.isArray(e)?"array":typeof e,key:""});if(o.report){return{validate:o.validate,sanitized:s,errors:o.errors}}else{return s}}t.exports=n;n.isBrowser=false;n.report=n.bind(n,{report:true});n.export=n.bind(n,{"export":true});n.isEqual=e("./isEqual.js");n.typeChecker=e("./typeChecker.js");n.sanitizer=e("./sanitizer.js");n.filter=e("./filter.js");n.keywords=e("./keywords.js");n.sentence=e("./sentence.js");n.purifySchema=e("./purifySchema.js");n.topLevelFilters=["instanceOf","min","max","length","minLength","maxLength","match","in","notIn"];function i(e,t,r){var i,a,o,s,f,l=t,u,p,h,c,d,y;if(!e||typeof e!=="object"){throw new n.SchemaError(r.path+" is not a schema (not an object or an array of object).")}if(Array.isArray(e)){h=[];for(i=0;i<e.length;i++){try{l=n.export(e[i],t)}catch(m){h.push(m.message.replace(/\.$/,""));continue}return l}this.validatorError(r.path+" does not validate any schema alternatives: ( "+h.join(" ; ")+" ).",r);return}if(l===null||l===undefined){if("default"in e){return e.default}if(e.optional){return l}}if(e.sanitize){s=Array.isArray(e.sanitize)?e.sanitize:[e.sanitize];for(i=0;i<s.length;i++){if(!n.sanitizer[s[i]]){throw new n.SchemaError("Bad schema (at "+r.path+"), unexistant sanitizer '"+s[i]+"'.")}l=n.sanitizer[s[i]].call(this,l,e,this.export&&l===t)}}if(e.type){if(!n.typeChecker[e.type]){throw new n.SchemaError("Bad schema (at "+r.path+"), unexistant type '"+e.type+"'.")}if(!n.typeChecker[e.type].call(this,l)){this.validatorError(r.path+" is not a "+e.type+".",r)}}for(i=0;i<n.topLevelFilters.length;i++){a=n.topLevelFilters[i];if(e[a]!==undefined){n.filter[a].call(this,l,e[a],r)}}if(e.filter){if(typeof e.filter!=="object"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'filter' should be an object.")}for(a in e.filter){if(!n.filter[a]){throw new n.SchemaError("Bad schema (at "+r.path+"), unexistant filter '"+a+"'.")}n.filter[a].call(this,l,e.filter[a],r)}}if(e.of!==undefined){if(!e.of||typeof e.of!=="object"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'of' should contains a schema object.")}if(!l||typeof l!=="object"&&typeof l!=="function"){this.validatorError(r.path+" can't have elements (not an array, nor an object, nor a function).",r)}if(Array.isArray(l)){if(this.export&&l===t){l=[];u=t}else{u=l}for(i=0;i<u.length;i++){l[i]=this.check(e.of,u[i],{path:r.path+"#"+i,key:i})}}else{if(this.export&&l===t){l={};u=t}else{u=l}for(a in u){l[a]=this.check(e.of,u[a],{path:r.path+"."+a,key:a})}}}if(e.keys!==undefined){if(!e.keys||typeof e.keys!=="object"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'keys' should contains a schema object.")}if(!l||typeof l!=="object"&&typeof l!=="function"||Array.isArray(l)){this.validatorError(r.path+" can't have keys (not a strict object, nor a function).",r)}if(this.export&&l===t){l={};u=t}else{u=l}for(a in u){o=this.check(e.keys,a,{path:r.path+":"+a,key:a});if(o in l&&o!==a){this.validatorError("'keys' cannot overwrite another existing key: "+r.path+" want to rename '"+a+"' to '"+o+"' but it already exists.")}l[o]=u[a];if(o!==a){delete l[a]}}}if(e.properties!==undefined){if(!e.properties||typeof e.properties!=="object"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'properties' should be an object.")}if(!l||typeof l!=="object"&&typeof l!=="function"){this.validatorError(r.path+" can't have properties (not an object nor a function).",r)}if(this.export&&l===t){l={};u=t}else{u=l}f={};if(Array.isArray(e.properties)){for(i=0;i<e.properties.length;i++){a=e.properties[i];if(!(a in u)){this.validatorError(r.path+" does not have all required properties ("+JSON.stringify(e.properties)+").",r)}l[a]=u[a];f[a]=true}}else{y=Object.keys(e.properties);d=[];while(y.length){if(d.length===y.length){throw new n.SchemaError(r.path+" has 'when' properties with circular dependencies.")}d=y;y=[];for(i=0;i<d.length;i++){a=d[i];if(!e.properties[a]||typeof e.properties[a]!=="object"){throw new n.SchemaError(r.path+"."+a+" is not a schema (not an object or an array of object).")}if(e.properties[a].when){c=e.properties[a].when;if(typeof c!=="object"||typeof c.sibling!=="string"||!c.verify||typeof c.verify!=="object"){throw new n.SchemaError(r.path+"."+a+".when should be an object with a 'sibling' (string), 'verify' (schema object) and 'set' properties.")}if(!f[c.sibling]&&e.properties[c.sibling]){y.push(a);continue}try{n(c.verify,l[c.sibling]);if(c.set===undefined){delete l[a]}else{l[a]=c.set}f[a]=true;continue}catch(m){}}f[a]=true;p=this.check(e.properties[a],u[a],{path:r.path+"."+a,key:a});if(p!==undefined||a in u){l[a]=p}}}}if(!e.extraProperties){for(a in u){if(!(a in f)){this.validatorError(r.path+" has extra properties ('"+a+"' is not in "+JSON.stringify(Object.keys(f))+").",r)}}}}if(e.elements!==undefined){if(!Array.isArray(e.elements)){throw new n.SchemaError("Bad schema (at "+r.path+"), 'elements' should be an array.")}if(!Array.isArray(l)){this.validatorError(r.path+" can't have elements (not an array).",r)}if(this.export&&l===t){l=[];u=t}else{u=l}for(i=0;i<e.elements.length;i++){l[i]=this.check(e.elements[i],u[i],{path:r.path+"#"+i,key:i})}if(!e.extraElements&&u.length>e.elements.length){this.validatorError(r.path+" has extra elements ("+u.length+" instead of "+e.elements.length+").",r)}}return l}function a(e,t){var r=new n.ValidatorError(e,t);this.validate=false;if(this.report){this.errors.push(r)}else{throw r}}n.ValidatorError=function s(e,t){this.message=e;if(t){this.path=t.path}this.stack=Error().stack};n.ValidatorError.prototype=Object.create(TypeError.prototype);n.ValidatorError.prototype.constructor=n.ValidatorError;n.ValidatorError.prototype.name="ValidatorError";n.SchemaError=function f(e){this.message=e;this.stack=Error().stack};n.SchemaError.prototype=Object.create(TypeError.prototype);n.SchemaError.prototype.constructor=n.SchemaError;n.SchemaError.prototype.name="SchemaError";function o(e,t){var r;if(!t||typeof t!=="object"||Array.isArray(t)){throw new TypeError("[doormen] .extend*(): Argument #0 should be a plain object")}for(r in t){if(r in e||typeof t[r]!=="function"){continue}e[r]=t[r]}}n.extendTypeChecker=function l(e){o(n.typeChecker,e)};n.extendSanitizer=function u(e){o(n.sanitizer,e)};n.extendFilter=function p(e){o(n.filter,e)};n.shouldThrow=function h(e){var t=false;try{e()}catch(r){t=true}if(!t){throw new Error("Function '"+(e.name||"(anonymous)")+"' should had thrown.")}};n.not=function c(){var e=arguments;n.shouldThrow(function(){n.apply(n,e)})};n.equals=function d(e,t){if(!n.isEqual(e,t)){throw new n.ValidatorError("should had been equal")}};n.not.equals=function y(e,t){if(n.isEqual(e,t)){throw new n.ValidatorError("should not had been equal")}}},{"./filter.js":3,"./isEqual.js":4,"./keywords.js":5,"./purifySchema.js":6,"./sanitizer.js":7,"./sentence.js":8,"./typeChecker.js":9}],3:[function(e,t,r){(function(r){var n=e("./doormen.js");var i={};t.exports=i;i.instanceOf=function a(e,t,i){if(typeof t==="string"){t=n.isBrowser?window[t]:r[t]}if(typeof t!=="function"){throw new n.SchemaError("Bad schema (at "+i.path+"), 'instanceOf' should be a function or a global function's name.")}if(!(e instanceof t)){this.validatorError(i.path+" is not an instance of "+t+".",i)}};i.min=i.gte=i.greaterThanOrEqual=i[">="]=function o(e,t,r){if(typeof t!=="number"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'min' should be a number.")}if(typeof e!=="number"||!(e>=t)){this.validatorError(r.path+" is not greater than or equal to "+t+".",r)}};i.max=i.lte=i.lesserThanOrEqual=i["<="]=function s(e,t,r){if(typeof t!=="number"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'max' should be a number.")}if(typeof e!=="number"||!(e<=t)){this.validatorError(r.path+" is not lesser than or equal to "+t+".",r)}};i.gt=i.greaterThan=i[">"]=function f(e,t,r){if(typeof t!=="number"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'greaterThan' should be a number.")}if(typeof e!=="number"||!(e>t)){this.validatorError(r.path+" is not greater than "+t+".",r)}};i.lt=i.lesserThan=i["<"]=function l(e,t,r){if(typeof t!=="number"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'lesserThan' should be a number.")}if(typeof e!=="number"||!(e<t)){this.validatorError(r.path+" is not lesser than "+t+".",r)}};i.length=function u(e,t,r){if(typeof t!=="number"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'length' should be a number.")}try{if(!(e.length===t)){throw true}}catch(i){this.validatorError(r.path+" has not a length greater than or equal to "+t+".",r)}};i.minLength=function p(e,t,r){if(typeof t!=="number"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'minLength' should be a number.")}try{if(!(e.length>=t)){throw true}}catch(i){this.validatorError(r.path+" has not a length greater than or equal to "+t+".",r)}};i.maxLength=function h(e,t,r){if(typeof t!=="number"){throw new n.SchemaError("Bad schema (at "+r.path+"), 'maxLength' should be a number.")}try{if(!(e.length<=t)){throw true}}catch(i){this.validatorError(r.path+" has not a length lesser than or equal to "+t+".",r)}};i.match=function c(e,t,r){if(typeof t!=="string"&&!(t instanceof RegExp)){throw new n.SchemaError("Bad schema (at "+r.path+"), 'match' should be a RegExp or a string.")}if(t instanceof RegExp){if(typeof e!=="string"||!e.match(t)){this.validatorError(r.path+" does not match "+t+" .",r)}}else{if(typeof e!=="string"||!e.match(new RegExp(t))){this.validatorError(r.path+" does not match /"+t+"/ .",r)}}};i.in=function d(e,t,r){var i,a=false;if(!Array.isArray(t)){throw new n.SchemaError("Bad schema (at "+r.path+"), 'in' should be an array.")}for(i=0;i<t.length;i++){if(n.isEqual(e,t[i])){a=true;break}}if(!a){this.validatorError(r.path+" should be in "+JSON.stringify(t)+".",r)}};i.notIn=function y(e,t,r){var i;if(!Array.isArray(t)){throw new n.SchemaError("Bad schema (at "+r.path+"), 'not-in' should be an array.")}for(i=0;i<t.length;i++){if(n.isEqual(e,t[i])){this.validatorError(r.path+" should not be in "+JSON.stringify(t)+".",r)}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./doormen.js":2}],4:[function(e,t,r){function n(e,t,r){var i,a,o,s,f;if(!r){r={leftStack:[],rightStack:[]}}if(e===t){return true}if(typeof e!==typeof t){return false}if(typeof e==="number"&&isNaN(e)&&isNaN(t)){return true}if(!e){return false}if(typeof e==="object"){o=r.leftStack.indexOf(e);s=r.rightStack.indexOf(t);if(o>=0){r.leftCircular=true}if(s>=0){r.rightCircular=true}if(r.leftCircular&&r.rightCircular){return true}if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length){return false}for(i=0;i<e.length;i++){if(e[i]===t[i]){continue}r.leftStack.push(e);r.rightStack.push(t);f=n(e[i],t[i],{leftStack:r.leftStack,rightStack:r.rightStack,leftCircular:r.leftCircular,rightCircular:r.rightCircular});if(!f){return false}r.leftStack.pop();r.rightStack.pop()}}else{if(Array.isArray(t)){return false}for(a in e){if(e[a]===undefined){continue}if(t[a]===undefined){return false}if(e[a]===t[a]){continue}r.leftStack.push(e);r.rightStack.push(t);f=n(e[a],t[a],{leftStack:r.leftStack,rightStack:r.rightStack,leftCircular:r.leftCircular,rightCircular:r.rightCircular});if(!f){return false}r.leftStack.pop();r.rightStack.pop()}for(a in t){if(t[a]===undefined){continue}if(e[a]===undefined){return false}}}return true}return false}t.exports=n},{}],5:[function(e,t,r){t.exports={it:{filler:true},its:{filler:true},a:{filler:true},an:{filler:true},the:{filler:true},to:{filler:true},that:{filler:true},has:{filler:true},have:{filler:true},having:{filler:true},at:{filler:true},"with":{filler:true},than:{filler:true},or:{filler:true},equal:{filler:true},":":{filler:true},should:{reset:true},expect:{reset:true},expected:{reset:true},be:{expected:"typeOrClass"},is:{expected:"typeOrClass"},instance:{expected:"class",override:{of:{filler:true}}},type:{expected:"type",override:{of:{filler:true}}},optional:{flag:true},empty:{set:{length:0}},after:{expected:"sanitizer"},sanitize:{expected:"sanitizer"},sanitizer:{expected:"sanitizer"},sanitizers:{expected:"sanitizer"},sanitizing:{expected:"sanitizer"},least:{expected:"minValue"},greater:{expected:"minValue",needKeyword:"equal"},">=":{expected:"minValue"},gte:{expected:"minValue"},most:{expected:"maxValue"},"<=":{expected:"maxValue"},lte:{expected:"maxValue"},lower:{expected:"maxValue",needKeyword:"equal"},lesser:{expected:"maxValue",needKeyword:"equal"},between:{expected:["minValue","maxValue"]},within:{expected:["minValue","maxValue"]},and:{next:true,restoreOverride:true,restoreExpected:true},",":{next:true,restoreOverride:true,restoreExpected:true},";":{reset:true},".":{reset:true},length:{expected:"lengthValue",override:{of:{filler:true},least:{expected:"minLengthValue"},most:{expected:"maxLengthValue"},between:{expected:["minLengthValue","maxLengthValue"]}}},letter:{minMaxAreLength:true},letters:{minMaxAreLength:true},"char":{minMaxAreLength:true},chars:{minMaxAreLength:true},character:{minMaxAreLength:true},characters:{minMaxAreLength:true},of:{expected:"typeOrClass",toChild:"of"}}},{}],6:[function(e,t,r){var n=e("./doormen.js");var i={optional:true,type:"strictObject",extraProperties:true,properties:{type:{optional:true,type:"string"},optional:{optional:true,type:"boolean"},extraProperties:{optional:true,type:"boolean"},"default":{optional:true},sanitize:{optional:true,sanitize:"toArray",type:"array",of:{type:"string"}},filter:{optional:true,type:"strictObject"},instanceOf:{optional:true,type:"classId"},min:{optional:true,type:"integer"},max:{optional:true,type:"integer"},length:{optional:true,type:"integer"},minLength:{optional:true,type:"integer"},maxLength:{optional:true,type:"integer"},match:{optional:true,type:"regexp"},"in":{optional:true,type:"array"},notIn:{optional:true,type:"array"},when:{optional:true,type:"strictObject",properties:{sibling:{type:"string"},set:{optional:true}}},hooks:{optional:true,type:"strictObject",of:{type:"array",sanitize:"toArray",of:{type:"function"}}}}};var a=[i,{type:"array",of:i}];i.properties.of=a;i.properties.properties=[{optional:true,type:"strictObject",of:a},{optional:true,type:"array",of:{type:"string"}}];i.properties.elements={optional:true,type:"array",of:a};i.properties.when.properties.verify=a;t.exports=function(e){return n.export(a,e)}},{"./doormen.js":2}],7:[function(e,t,r){var n=e("./doormen.js");var i={};t.exports=i;i.toNumber=function a(e){if(typeof e==="number"){return e}else if(!e){return NaN}else if(typeof e==="string"){return parseFloat(e)}else{return NaN}};i.toInteger=function o(e){if(typeof e==="number"){return Math.round(e)}else if(!e){return NaN}else if(typeof e==="string"){return Math.round(parseFloat(e))}else{return NaN}};i.toArray=function s(e){if(Array.isArray(e)){return e}if(e===undefined){return[]}if(e&&typeof e==="object"&&n.typeChecker.arguments(e)){return Array.prototype.slice.call(e)}return[e]};i.removeExtraProperties=function(e,t,r){var n,i,a;if(!e||typeof e!=="object"&&typeof e!=="function"||!t.properties||typeof t.properties!=="object"){return e}if(r){a=Array.isArray(e)?e.slice():{};if(Array.isArray(t.properties)){for(n=0;n<t.properties.length;n++){i=t.properties[n];if(i in e){a[i]=e[i]}}}else{for(i in t.properties){if(i in e){a[i]=e[i]}}}return a}else{if(Array.isArray(t.properties)){for(i in e){if(t.properties.indexOf(i)===-1){delete e[i]}}}else{for(i in e){if(!(i in t.properties)){delete e[i]}}}return e}};i.trim=function f(e){if(typeof e==="string"){return e.trim()}else{return e}};i.toUpperCase=function l(e){if(typeof e==="string"){return e.toUpperCase()}else{return e}};i.toLowerCase=function u(e){if(typeof e==="string"){return e.toLowerCase()}else{return e}};i.dashToCamelCase=function p(e){if(typeof e!=="string"){return e}return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})};i.mongoId=function h(t){if(typeof t!=="string"){return t}if(n.isBrowser){return t}try{var r=e("mongodb");return r.ObjectID(t)}catch(i){return t}}},{"./doormen.js":2,mongodb:10}],8:[function(e,t,r){var n=e("./doormen.js");function i(e){var t,r,i,a,o,s,f,l,u,p,h,c,d,y;i=e.split(/ +|(?=[,;.:])/);s={};f=s;l=[s];u=[];h={};p=c=h;o=null;a=["typeOrClass"];d=null;y=null;var m=function g(e,t){var r;if(e.reset){u=[];p=c=h;o=null;a=["typeOrClass"];d=null;y=null}if(e.toChild){f[e.toChild]={};l.push(f[e.toChild]);f=f[e.toChild]}if(e.expected){a=Array.isArray(e.expected)?e.expected.slice():[e.expected];d=null}if(e.needKeyword){d=e.needKeyword;y=t}else if(d&&d===t){d=null;y=null}if(e.set){for(r in e.set){f[r]=e.set[r]}}if(e.flag){f[e.flag]=true}if(e.override){p=e.override}if(e.restoreOverride){p=c}if(e.restoreExpected&&!a.length){a.unshift(o)}if(e.nextActions){u=e.nextActions.slice()}if(e.minMaxAreLength){if("min"in f){f.minLength=f.min;delete f.min}if("max"in f){f.maxLength=f.max;delete f.max}}if(e.next&&u.length){g(u.shift())}};for(t=0;t<i.length;t++){r=i[t];if(p[r]||n.keywords[r]){m(p[r]||n.keywords[r],r)}else if(!a.length){throw new Error("Can't understand the word #"+t+" '"+r+"'"+(t>0?", just after '"+i[t-1]+"'":"")+", in the sentence '"+e+"'.")}else if(d){throw new Error("Keyword '"+d+"' is required after keyword '"+y+"'"+", in the sentence '"+e+"'.")}else{r=n.sanitizer.dashToCamelCase(r);switch(a[0]){case"type":f.type=r;break;case"class":f.instanceOf=r;break;case"typeOrClass":if(r[0].toLowerCase()===r[0]){f.type=r}else{f.instanceOf=r}break;case"sanitizer":if(!f.sanitize){f.sanitize=[]}f.sanitize.push(r);break;case"minValue":f.min=parseInt(r,10);break;case"maxValue":f.max=parseInt(r,10);break;case"lengthValue":f.length=parseInt(r,10);break;case"minLengthValue":f.minLength=parseInt(r,10);break;case"maxLengthValue":f.maxLength=parseInt(r,10);break}o=a.shift();if(!u.length){if(p!==h){c=p;p=h}else{c=h}}}}return s}t.exports=i},{"./doormen.js":2}],9:[function(e,t,r){(function(r){var n=e("./doormen.js");var i={undefined:function(e){return e===undefined},"null":function(e){return e===null},"boolean":function(e){return typeof e==="boolean"},number:function(e){return typeof e==="number"},string:function(e){return typeof e==="string"},object:function(e){return e&&typeof e==="object"},"function":function(e){return typeof e==="function"},array:function(e){return Array.isArray(e)},error:function(e){return e instanceof Error},date:function(e){return e instanceof Date},arguments:function(e){return Object.prototype.toString.call(e)==="[object Arguments]"},buffer:function(e){try{return e instanceof r}catch(t){return false}},strictObject:function(e){return e&&typeof e==="object"&&!Array.isArray(e)},classId:function(e){return typeof e==="function"||typeof e==="string"&&e.length},regexp:function(e){if(e instanceof RegExp){return true}if(typeof e!=="string"){return false}try{new RegExp(e);return true}catch(t){return false}}};t.exports=i;i.real=function a(e){return typeof e==="number"&&!isNaN(e)&&isFinite(e)};i.integer=function o(e){return typeof e==="number"&&isFinite(e)&&e===Math.round(e)};i.ip=function s(e){return i.ipv4(e)||i.ipv6(e)};i.ipv4=function f(e,t){var r,n,i;if(typeof e!=="string"){return false}if(!t&&!/^[0-9.]+$/.test(e)){return false}n=e.split(".");if(n.length!==4){return false}for(r=0;r<n.length;r++){if(!n[r].length||n[r].length>3){return false}i=parseInt(n[r],10);if(!(i>=0&&i<=255)){return false}}return true};i.ipv6=function l(e,t){var r,n,i=false,a=false,o=false;if(typeof e!=="string"){return false}if(!t&&!/^[0-9a-f:]+$/.test(e)){return false}n=e.split(":");if(n.length>9&&n.length<3){return false}for(r=0;r<n.length;r++){if(!n[r].length){if(r===0){a=true;if(n[1].length){return false}}else if(r===n.length-1){o=true;if(n[r-1].length){return false}}else{if(i){return false}i=true}}else if(n[r].length>4){return false}}if(n.length<8&&!i){return false}if(n.length-(a?1:0)-(o?1:0)>8){return false}return true};i.hostname=function u(e,t){var r,n;if(typeof e!=="string"){return false}if(!t&&!/^[^\s\/$?#@:]+$/.test(e)){return false}n=e.split(".");for(r=0;r<n.length;r++){if(!n[r].length&&r!==n.length-1){return false}if(n[r].length>63){return false}}return true};i.host=function p(e){return i.ip(e)||i.hostname(e)};i.url=function h(e,t){if(typeof e!=="string"){return false}var r=e.match(/^([a-z+.-]+):\/\/((?:([^\s@\/:]+)(?::([^\s@\/:]+))?@)?(([0-9.]+)|([0-9a-f:]+)|([^\s\/$?#@:]+))(:[0-9]+)?)?(\/[^\s]*)?$/);if(!r){return false}if(t&&r[1]!=="http"&&r[1]!=="https"&&r[1]!=="ftp"){return false}if(!r[2]&&r[1]!=="file"){return false}if(r[6]){if(!i.ipv4(r[6],true)){return false}}if(r[7]){if(!i.ipv6(r[7],true)){return false}}if(r[8]){if(!i.hostname(r[8],true)){return false}}return true};i.weburl=function c(e){return i.url(e,true)};i.email=function d(e){var t,r,n;if(typeof e!=="string"){return false}if(e.length>254){return false}t=e.match(/^([a-zA-Z0-9._#~!$&*+=,;:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF-]+)@([^\s\/$?#@:]+)$/);if(!t){return false}if(t[1].length>64){return false}n=t[1].split(".");for(r=0;r<n.length;r++){if(!n[r].length){return false}}if(!i.hostname(t[2],true)){return false}return true};i.mongoId=function y(e){if(e&&typeof e==="object"&&e.constructor.name==="ObjectID"&&e.id&&typeof e.toString==="function"){e=e.toString()}return typeof e==="string"&&e.length===24&&/^[0-9a-f]{24}$/.test(e)}}).call(this,e("buffer").Buffer)},{"./doormen.js":2,buffer:10}],10:[function(e,t,r){},{}]},{},[1])(1)});