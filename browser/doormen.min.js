(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var r;if(typeof window!=="undefined"){r=window}else if(typeof global!=="undefined"){r=global}else if(typeof self!=="undefined"){r=self}else{r=this}r.doormen=e()}})(function(){var e,r,t;return function n(e,r,t){function i(o,f){if(!r[o]){if(!e[o]){var s=typeof require=="function"&&require;if(!f&&s)return s(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(r){var t=e[o][1][r];return i(t?t:r)},u,u.exports,n,e,r,t)}return r[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<t.length;o++)i(t[o]);return i}({1:[function(e,r,t){r.exports=e("./doormen.js");r.exports.isBrowser=true},{"./doormen.js":2}],2:[function(e,r,t){function n(e,r,t){if(typeof r==="string"){r=n.sentence(r)}if(!r||typeof r!=="object"){throw new TypeError("Bad schema, it should be an object!")}if(!t||typeof t!=="object"){t={}}var o={validate:true,errors:[],check:i,validatorError:a,report:!!t.report,"export":!!t.export};var f=o.check(e,r,{path:e===null?"null":Array.isArray(e)?"array":typeof e,key:""});if(o.report){return{validate:o.validate,sanitized:f,errors:o.errors}}else{return f}}r.exports=n;n.isBrowser=false;n.report=function o(e,r){return n(e,r,{report:true})};n.export=function f(e,r){return n(e,r,{"export":true})};n.isEqual=e("./isEqual.js");n.typeChecker=e("./typeChecker.js");n.sanitizer=e("./sanitizer.js");n.filter=e("./filter.js");n.keywords=e("./keywords.js");n.sentence=e("./sentence.js");n.topLevelFilters=["instanceOf","min","max","length","minLength","maxLength","match","in","notIn"];function i(e,r,t){var i,a,o,f,s=e,l;if(!r||typeof r!=="object"){throw new n.SchemaError(t.path+" is not a schema (not an object).")}if(s===null||s===undefined){if("default"in r){return r.default}if(r.optional){return s}}if(r.sanitize){o=Array.isArray(r.sanitize)?r.sanitize:[r.sanitize];for(i=0;i<o.length;i++){if(!n.sanitizer[o[i]]){throw new n.SchemaError("Bad schema (at "+t.path+"), unexistant sanitizer '"+o[i]+"'.")}s=n.sanitizer[o[i]].call(this,s,r,this.export&&s===e)}}if(r.type){if(!n.typeChecker[r.type]){throw new n.SchemaError("Bad schema (at "+t.path+"), unexistant type '"+r.type+"'.")}if(!n.typeChecker[r.type].call(this,s)){this.validatorError(t.path+" is not a "+r.type+".",t)}}for(i=0;i<n.topLevelFilters.length;i++){a=n.topLevelFilters[i];if(r[a]!==undefined){n.filter[a].call(this,s,r[a],t)}}if(r.filter){if(typeof r.filter!=="object"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'filter' should be an object.")}for(a in r.filter){if(!n.filter[a]){throw new n.SchemaError("Bad schema (at "+t.path+"), unexistant filter '"+a+"'.")}n.filter[a].call(this,s,r.filter[a],t)}}if(r.of!==undefined){if(!r.of||typeof r.of!=="object"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'of' should contains a schema object.")}if(!s||typeof s!=="object"&&typeof s!=="function"){this.validatorError(t.path+" can't have elements (not an array, nor an object, nor a function).",t)}if(Array.isArray(s)){if(this.export&&s===e){s=[];l=e}else{l=s}for(i=0;i<l.length;i++){s[i]=this.check(l[i],r.of,{path:t.path+"#"+i,key:i})}}else{if(this.export&&s===e){s={};l=e}else{l=s}for(a in l){s[a]=this.check(l[a],r.of,{path:t.path+"."+a,key:a})}}}if(r.properties!==undefined){if(!r.properties||typeof r.properties!=="object"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'properties' should be an object.")}if(!s||typeof s!=="object"&&typeof s!=="function"){this.validatorError(t.path+" can't have properties (not an object nor a function).",t)}if(this.export&&s===e){s={};l=e}else{l=s}if(Array.isArray(r.properties)){f={};for(i=0;i<r.properties.length;i++){a=r.properties[i];if(!(a in l)){this.validatorError(t.path+" does not have all required properties ("+JSON.stringify(r.properties)+").",t)}s[a]=l[a];f[a]=true}}else{for(a in r.properties){s[a]=this.check(l[a],r.properties[a],{path:t.path+"."+a,key:a})}f=r.properties}if(!r.extraProperties){for(a in l){if(!(a in f)){this.validatorError(t.path+" has extra properties ("+JSON.stringify(Object.keys(f))+").",t)}}}}if(r.elements!==undefined){if(!Array.isArray(r.elements)){throw new n.SchemaError("Bad schema (at "+t.path+"), 'elements' should be an array.")}if(!Array.isArray(s)){this.validatorError(t.path+" can't have elements (not an array).",t)}if(this.export&&s===e){s=[];l=e}else{l=s}for(i=0;i<r.elements.length;i++){s[i]=this.check(l[i],r.elements[i],{path:t.path+"#"+i,key:i})}if(!r.extraElements&&l.length>r.elements.length){this.validatorError(t.path+" has extra elements ("+l.length+" instead of "+r.elements.length+").",t)}}return s}function a(e,r){var t=new n.ValidatorError(e,r);this.validate=false;if(this.report){this.errors.push(t)}else{throw t}}n.ValidatorError=function s(e,r){this.message=e;if(r){this.path=r.path}this.stack=Error().stack};n.ValidatorError.prototype=Object.create(TypeError.prototype);n.ValidatorError.prototype.constructor=n.ValidatorError;n.ValidatorError.prototype.name="ValidatorError";n.SchemaError=function l(e){this.message=e;this.stack=Error().stack};n.SchemaError.prototype=Object.create(TypeError.prototype);n.SchemaError.prototype.constructor=n.SchemaError;n.SchemaError.prototype.name="SchemaError";n.shouldThrow=function u(e){var r=false;try{e()}catch(t){r=true}if(!r){throw new Error("Function '"+(e.name||"(anonymous)")+"' should had thrown.")}};n.not=function h(e,r,t){n.shouldThrow(function(){n(e,r,t)})};n.equals=function c(e,r){if(!n.isEqual(e,r)){throw new n.ValidatorError("should had been equal")}};n.not.equals=function p(e,r){if(n.isEqual(e,r)){throw new n.ValidatorError("should not had been equal")}}},{"./filter.js":3,"./isEqual.js":4,"./keywords.js":5,"./sanitizer.js":6,"./sentence.js":7,"./typeChecker.js":8}],3:[function(e,r,t){(function(t){var n=e("./doormen.js");var i={};r.exports=i;i.instanceOf=function a(e,r,i){if(typeof r==="string"){r=t[r]}if(typeof r!=="function"){throw new n.SchemaError("Bad schema (at "+i.path+"), 'instanceOf' should be a function.")}if(!(e instanceof r)){this.validatorError(i.path+" is not an instance of "+r+".",i)}};i.min=i.gte=i.greaterThanOrEqual=i[">="]=function o(e,r,t){if(typeof r!=="number"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'min' should be a number.")}if(typeof e!=="number"||!(e>=r)){this.validatorError(t.path+" is not greater than or equal to "+r+".",t)}};i.max=i.lte=i.lesserThanOrEqual=i["<="]=function f(e,r,t){if(typeof r!=="number"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'max' should be a number.")}if(typeof e!=="number"||!(e<=r)){this.validatorError(t.path+" is not lesser than or equal to "+r+".",t)}};i.gt=i.greaterThan=i[">"]=function s(e,r,t){if(typeof r!=="number"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'greaterThan' should be a number.")}if(typeof e!=="number"||!(e>r)){this.validatorError(t.path+" is not greater than "+r+".",t)}};i.lt=i.lesserThan=i["<"]=function l(e,r,t){if(typeof r!=="number"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'lesserThan' should be a number.")}if(typeof e!=="number"||!(e<r)){this.validatorError(t.path+" is not lesser than "+r+".",t)}};i.length=function u(e,r,t){if(typeof r!=="number"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'length' should be a number.")}try{if(!(e.length===r)){throw true}}catch(i){this.validatorError(t.path+" has not a length greater than or equal to "+r+".",t)}};i.minLength=function h(e,r,t){if(typeof r!=="number"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'minLength' should be a number.")}try{if(!(e.length>=r)){throw true}}catch(i){this.validatorError(t.path+" has not a length greater than or equal to "+r+".",t)}};i.maxLength=function c(e,r,t){if(typeof r!=="number"){throw new n.SchemaError("Bad schema (at "+t.path+"), 'maxLength' should be a number.")}try{if(!(e.length<=r)){throw true}}catch(i){this.validatorError(t.path+" has not a length lesser than or equal to "+r+".",t)}};i.match=function p(e,r,t){if(typeof r!=="string"&&!(r instanceof RegExp)){throw new n.SchemaError("Bad schema (at "+t.path+"), 'match' should be a RegExp or a string.")}if(r instanceof RegExp){if(typeof e!=="string"||!e.match(r)){this.validatorError(t.path+" does not match "+r+" .",t)}}else{if(typeof e!=="string"||!e.match(new RegExp(r))){this.validatorError(t.path+" does not match /"+r+"/ .",t)}}};i.in=function d(e,r,t){var i,a=false;if(!Array.isArray(r)){throw new n.SchemaError("Bad schema (at "+t.path+"), 'in' should be an array.")}for(i=0;i<r.length;i++){if(n.isEqual(e,r[i])){a=true;break}}if(!a){this.validatorError(t.path+" should be in "+JSON.stringify(r)+".",t)}};i.notIn=function m(e,r,t){var i;if(!Array.isArray(r)){throw new n.SchemaError("Bad schema (at "+t.path+"), 'not-in' should be an array.")}for(i=0;i<r.length;i++){if(n.isEqual(e,r[i])){this.validatorError(t.path+" should not be in "+JSON.stringify(r)+".",t)}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./doormen.js":2}],4:[function(e,r,t){function n(e,r,t){var i,a,o,f,s;if(!t){t={leftStack:[],rightStack:[]}}if(e===r){return true}if(typeof e!==typeof r){return false}if(typeof e==="number"&&isNaN(e)&&isNaN(r)){return true}if(!e){return false}if(typeof e==="object"){o=t.leftStack.indexOf(e);f=t.rightStack.indexOf(r);if(o>=0){t.leftCircular=true}if(f>=0){t.rightCircular=true}if(t.leftCircular&&t.rightCircular){return true}if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length){return false}for(i=0;i<e.length;i++){if(e[i]===r[i]){continue}t.leftStack.push(e);t.rightStack.push(r);s=n(e[i],r[i],{leftStack:t.leftStack,rightStack:t.rightStack,leftCircular:t.leftCircular,rightCircular:t.rightCircular});if(!s){return false}t.leftStack.pop();t.rightStack.pop()}}else{if(Array.isArray(r)){return false}for(a in e){if(e[a]===undefined){continue}if(r[a]===undefined){return false}if(e[a]===r[a]){continue}t.leftStack.push(e);t.rightStack.push(r);s=n(e[a],r[a],{leftStack:t.leftStack,rightStack:t.rightStack,leftCircular:t.leftCircular,rightCircular:t.rightCircular});if(!s){return false}t.leftStack.pop();t.rightStack.pop()}for(a in r){if(r[a]===undefined){continue}if(e[a]===undefined){return false}}}return true}return false}r.exports=n},{}],5:[function(e,r,t){r.exports={it:{filler:true},its:{filler:true},a:{filler:true},an:{filler:true},the:{filler:true},to:{filler:true},that:{filler:true},has:{filler:true},have:{filler:true},having:{filler:true},at:{filler:true},"with":{filler:true},than:{filler:true},or:{filler:true},equal:{filler:true},":":{filler:true},should:{reset:true},expect:{reset:true},expected:{reset:true},be:{expected:"typeOrClass"},is:{expected:"typeOrClass"},instance:{expected:"class",override:{of:{filler:true}}},type:{expected:"type",override:{of:{filler:true}}},optional:{flag:true},empty:{set:{length:0}},after:{expected:"sanitizer"},sanitize:{expected:"sanitizer"},sanitizer:{expected:"sanitizer"},sanitizers:{expected:"sanitizer"},sanitizing:{expected:"sanitizer"},least:{expected:"minValue"},greater:{expected:"minValue",needKeyword:"equal"},">=":{expected:"minValue"},gte:{expected:"minValue"},most:{expected:"maxValue"},"<=":{expected:"maxValue"},lte:{expected:"maxValue"},lower:{expected:"maxValue",needKeyword:"equal"},lesser:{expected:"maxValue",needKeyword:"equal"},between:{expected:["minValue","maxValue"]},within:{expected:["minValue","maxValue"]},and:{next:true,restoreOverride:true,restoreExpected:true},",":{next:true,restoreOverride:true,restoreExpected:true},";":{reset:true},".":{reset:true},length:{expected:"lengthValue",override:{of:{filler:true},least:{expected:"minLengthValue"},most:{expected:"maxLengthValue"},between:{expected:["minLengthValue","maxLengthValue"]}}},letter:{minMaxAreLength:true},letters:{minMaxAreLength:true},"char":{minMaxAreLength:true},chars:{minMaxAreLength:true},character:{minMaxAreLength:true},characters:{minMaxAreLength:true},of:{expected:"typeOrClass",toChild:"of"}}},{}],6:[function(e,r,t){var n=e("./doormen.js");var i={};r.exports=i;i.toNumber=function a(e){if(typeof e==="number"){return e}else if(!e){return NaN}else if(typeof e==="string"){return parseFloat(e)}else{return NaN}};i.toArray=function o(e){if(Array.isArray(e)){return e}if(e&&typeof e==="object"){if(n.typeChecker.arguments(e)){return Array.prototype.slice.call(e)}}return[e]};i.removeExtraProperties=function(e,r,t){var n,i,a;if(!e||typeof e!=="object"&&typeof e!=="function"||!r.properties||typeof r.properties!=="object"){return e}if(t){a=Array.isArray(e)?e.slice():{};if(Array.isArray(r.properties)){for(n=0;n<r.properties.length;n++){i=r.properties[n];if(i in e){a[i]=e[i]}}}else{for(i in r.properties){if(i in e){a[i]=e[i]}}}return a}else{if(Array.isArray(r.properties)){for(i in e){if(r.properties.indexOf(i)===-1){delete e[i]}}}else{for(i in e){if(!(i in r.properties)){delete e[i]}}}return e}};i.trim=function f(e){if(typeof e==="string"){return e.trim()}else{return e}};i.toUpperCase=function s(e){if(typeof e==="string"){return e.toUpperCase()}else{return e}};i.toLowerCase=function l(e){if(typeof e==="string"){return e.toLowerCase()}else{return e}};i.dashToCamelCase=function u(e){if(typeof e!=="string"){return e}return e.replace(/-(.)/g,function(e,r){return r.toUpperCase()})}},{"./doormen.js":2}],7:[function(e,r,t){var n=e("./doormen.js");function i(e){var r,t,i,a,o,f,s,l,u,h,c,p,d,m;i=e.split(/ +|(?=[,;.:])/);f={};s=f;l=[f];u=[];c={};h=p=c;o=null;a=["typeOrClass"];d=null;m=null;var y=function g(e,r){var t;if(e.reset){u=[];h=p=c;o=null;a=["typeOrClass"];d=null;m=null}if(e.toChild){s[e.toChild]={};l.push(s[e.toChild]);s=s[e.toChild]}if(e.expected){a=Array.isArray(e.expected)?e.expected.slice():[e.expected];d=null}if(e.needKeyword){d=e.needKeyword;m=r}else if(d&&d===r){d=null;m=null}if(e.set){for(t in e.set){s[t]=e.set[t]}}if(e.flag){s[e.flag]=true}if(e.override){h=e.override}if(e.restoreOverride){h=p}if(e.restoreExpected&&!a.length){a.unshift(o)}if(e.nextActions){u=e.nextActions.slice()}if(e.minMaxAreLength){if("min"in s){s.minLength=s.min;delete s.min}if("max"in s){s.maxLength=s.max;delete s.max}}if(e.next&&u.length){g(u.shift())}};for(r=0;r<i.length;r++){t=i[r];if(h[t]||n.keywords[t]){y(h[t]||n.keywords[t],t)}else if(!a.length){throw new Error("Can't understand the word #"+r+" '"+t+"'"+(r>0?", just after '"+i[r-1]+"'":"")+", in the sentence '"+e+"'.")}else if(d){throw new Error("Keyword '"+d+"' is required after keyword '"+m+"'"+", in the sentence '"+e+"'.")}else{t=n.sanitizer.dashToCamelCase(t);switch(a[0]){case"type":s.type=t;break;case"class":s.instanceOf=t;break;case"typeOrClass":if(t[0].toLowerCase()===t[0]){s.type=t}else{s.instanceOf=t}break;case"sanitizer":if(!s.sanitize){s.sanitize=[]}s.sanitize.push(t);break;case"minValue":s.min=parseInt(t,10);break;case"maxValue":s.max=parseInt(t,10);break;case"lengthValue":s.length=parseInt(t,10);break;case"minLengthValue":s.minLength=parseInt(t,10);break;case"maxLengthValue":s.maxLength=parseInt(t,10);break}o=a.shift();if(!u.length){if(h!==c){p=h;h=c}else{p=c}}}}return f}r.exports=i},{"./doormen.js":2}],8:[function(e,r,t){(function(e){var t={undefined:function(e){return e===undefined},"null":function(e){return e===null},"boolean":function(e){return typeof e==="boolean"},number:function(e){return typeof e==="number"},string:function(e){return typeof e==="string"},object:function(e){return e&&typeof e==="object"},"function":function(e){return typeof e==="function"},array:function(e){return Array.isArray(e)},error:function(e){return e instanceof Error},date:function(e){return e instanceof Date},regexp:function(e){return e instanceof RegExp},arguments:function(e){return Object.prototype.toString.call(e)==="[object Arguments]"},buffer:function(r){try{return r instanceof e}catch(t){return false}}};r.exports=t;t.real=function n(e){return typeof e==="number"&&!isNaN(e)&&isFinite(e)};t.integer=function i(e){return typeof e==="number"&&isFinite(e)&&e===Math.round(e)};t.ip=function a(e){return t.ipv4(e)||t.ipv6(e)};t.ipv4=function o(e,r){var t,n,i;if(typeof e!=="string"){return false}if(!r&&!/^[0-9.]+$/.test(e)){return false}n=e.split(".");if(n.length!==4){return false}for(t=0;t<n.length;t++){if(!n[t].length||n[t].length>3){return false}i=parseInt(n[t],10);if(!(i>=0&&i<=255)){return false}}return true};t.ipv6=function f(e,r){var t,n,i=false,a=false,o=false;if(typeof e!=="string"){return false}if(!r&&!/^[0-9a-f:]+$/.test(e)){return false}n=e.split(":");if(n.length>9&&n.length<3){return false}for(t=0;t<n.length;t++){if(!n[t].length){if(t===0){a=true;if(n[1].length){return false}}else if(t===n.length-1){o=true;if(n[t-1].length){return false}}else{if(i){return false}i=true}}else if(n[t].length>4){return false}}if(n.length<8&&!i){return false}if(n.length-(a?1:0)-(o?1:0)>8){return false}return true};t.hostname=function s(e,r){var t,n;if(typeof e!=="string"){return false}if(!r&&!/^[^\s\/$?#@:]+$/.test(e)){return false}n=e.split(".");for(t=0;t<n.length;t++){if(!n[t].length&&t!==n.length-1){return false}if(n[t].length>63){return false}}return true};t.url=function l(e,r){if(typeof e!=="string"){return false}var n=e.match(/^([a-z+.-]+):\/\/((?:([^\s@\/:]+)(?::([^\s@\/:]+))?@)?(([0-9.]+)|([0-9a-f:]+)|([^\s\/$?#@:]+))(:[0-9]+)?)?(\/[^\s]*)?$/);if(!n){return false}if(r&&n[1]!=="http"&&n[1]!=="https"&&n[1]!=="ftp"){return false}if(!n[2]&&n[1]!=="file"){return false}if(n[6]){if(!t.ipv4(n[6],true)){return false}}if(n[7]){if(!t.ipv6(n[7],true)){return false}}if(n[8]){if(!t.hostname(n[8],true)){return false}}return true};t.weburl=function u(e){return t.url(e,true)};t.email=function h(e){var r,n,i;if(typeof e!=="string"){return false}if(e.length>254){return false}r=e.match(/^([a-zA-Z0-9._#~!$&*+=,;:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF-]+)@([^\s\/$?#@:]+)$/);if(!r){return false}if(r[1].length>64){return false}i=r[1].split(".");for(n=0;n<i.length;n++){if(!i[n].length){return false}}if(!t.hostname(r[2],true)){return false}return true}}).call(this,e("buffer").Buffer)},{buffer:9}],9:[function(e,r,t){},{}]},{},[1])(1)});